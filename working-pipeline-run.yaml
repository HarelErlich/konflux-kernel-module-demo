apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: working-kernel-module-release-x8fx4
  namespace: rh-ee-herlich-tenant
  labels:
    appstudio.openshift.io/snapshot: kernel-module-app-x8fx4
    appstudio.openshift.io/application: kernel-module-app
spec:
  pipelineRef:
    resolver: git
    params:
      - name: url
        value: "https://github.com/HarelErlich/konflux-kernel-module-demo.git"
      - name: revision
        value: main
      - name: pathInRepo
        value: "pipelines/kernel-module-publish-pipeline.yaml"
  params:
    - name: input-image
      value: "quay.io/herlich/kernel-module@sha256:cbb63ebfd3be350bb4df05119b072a6f725847dfea31d4411a96611b2bffec7b"
    - name: gitRepoURL
      value: "github.com/HarelErlich/kernel-module-demo-artifacts.git"
    - name: gitRepoTokenSecret
      value: "git-publish-secret"
    - name: s3Endpoint
      value: "https://axvbdgx0qi1m.compat.objectstorage.il-jerusalem-1.oraclecloud.com"
    - name: s3Bucket
      value: "bucket-20250917-1359"
    - name: s3CredentialsSecret
      value: "oci-publish-secret"
    - name: azureStorageAccount
      value: "herlichstor01"
    - name: azureContainer
      value: "kmods-artifacts"
    - name: azureSpSecret
      value: "azure-blob-sp-secret"
  serviceAccountName: appstudio-pipelines
  workspaces:
    - name: ws-repack
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
    - name: ws-publish
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
